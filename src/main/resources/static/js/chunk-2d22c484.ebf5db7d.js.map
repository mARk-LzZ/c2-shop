{"version":3,"sources":["webpack:///./src/admin/usersList.vue?02aa","webpack:///src/admin/usersList.vue","webpack:///./src/admin/usersList.vue?4bdc","webpack:///./src/admin/usersList.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","path","_v","on","getUserList","model","value","queryInfo","callback","$$v","$set","expression","slot","$event","dialogVisible","staticStyle","userlist","scopedSlots","_u","key","fn","scope","userStateChanged","row","showEditDialog","id","deleteUser","setRole","pagenum","pagesize","total","handleSizeChange","handleCurrentChange","addDialogClosed","ref","staticClass","addUserForm","addUserFormRules","addUser","editDialogVisible","editDialogClosed","editUserForm","editUserFormRules","editUser","setRoleDialogVisible","setRoleDialogClosed","_s","userInfo","username","roleid","selectRoleId","_l","item","saveRoleInfo","staticRenderFns","data","checkEmail","regEail","test","cb","Error","checkMobile","regMobile","query","password","email","mobile","rolesList","methods","$axios","get","console","log","res","userl","i","mg_state","newSize","newPage","put","$refs","addUserFormRef","resetFields","editUserFormRef","created","component"],"mappings":"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","file":"js/chunk-2d22c484.ebf5db7d.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-breadcrumb',{attrs:{\"separator-class\":\"el-icon-arrow-right\"}},[_c('el-breadcrumb-item',{attrs:{\"to\":{ path: '/home' }}},[_vm._v(\"首页\")]),_c('el-breadcrumb-item',[_vm._v(\"用户管理\")]),_c('el-breadcrumb-item',[_vm._v(\"用户列表\")])],1),_c('el-card',[_c('el-row',{attrs:{\"gutter\":20}},[_c('el-col',{attrs:{\"span\":7}},[_c('el-input',{attrs:{\"placeholder\":\"请输入内容\",\"clearable\":\"\"},on:{\"clear\":_vm.getUserList},model:{value:(_vm.queryInfo.query),callback:function ($$v) {_vm.$set(_vm.queryInfo, \"query\", $$v)},expression:\"queryInfo.query\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.getUserList},slot:\"append\"})],1)],1),_c('el-col',{attrs:{\"span\":4}},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.dialogVisible = true}}},[_vm._v(\"添加用户\")])],1)],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.userlist,\"border\":\"\",\"stripe\":\"\"}},[_c('el-table-column',{attrs:{\"type\":\"index\"}}),_c('el-table-column',{attrs:{\"prop\":\"username\",\"label\":\"姓名\"}}),_c('el-table-column',{attrs:{\"prop\":\"email\",\"label\":\"邮箱\"}}),_c('el-table-column',{attrs:{\"prop\":\"mobilephone\",\"label\":\"电话\"}}),_c('el-table-column',{attrs:{\"prop\":\"roleid\",\"label\":\"角色\"}}),_c('el-table-column',{attrs:{\"label\":\"状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-switch',{on:{\"change\":function($event){return _vm.userStateChanged(scope.row)}},model:{value:(scope.row.mg_state),callback:function ($$v) {_vm.$set(scope.row, \"mg_state\", $$v)},expression:\"scope.row.mg_state\"}})]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-edit\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.showEditDialog(scope.row.id)}}}),_c('el-button',{attrs:{\"type\":\"danger\",\"icon\":\"el-icon-delete\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.deleteUser(scope.row.id)}}}),_c('el-tooltip',{attrs:{\"enterable\":false,\"effect\":\"dark\",\"content\":\"分配角色\",\"placement\":\"top-start\"}},[_c('el-button',{attrs:{\"type\":\"warning\",\"icon\":\"el-icon-setting\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.setRole(scope.row)}}})],1)]}}])})],1),_c('el-pagination',{attrs:{\"current-page\":_vm.queryInfo.pagenum,\"page-sizes\":[1, 2, 5, 10],\"page-size\":_vm.queryInfo.pagesize,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"添加用户\",\"visible\":_vm.dialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event},\"close\":_vm.addDialogClosed}},[_c('el-form',{ref:\"addUserFormRef\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.addUserForm,\"rules\":_vm.addUserFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\",\"prop\":\"username\"}},[_c('el-input',{model:{value:(_vm.addUserForm.username),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"username\", $$v)},expression:\"addUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"密码\",\"prop\":\"password\"}},[_c('el-input',{model:{value:(_vm.addUserForm.password),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"password\", $$v)},expression:\"addUserForm.password\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.addUserForm.email),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"email\", $$v)},expression:\"addUserForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.addUserForm.mobile),callback:function ($$v) {_vm.$set(_vm.addUserForm, \"mobile\", $$v)},expression:\"addUserForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"修改用户\",\"visible\":_vm.editDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.editDialogVisible=$event},\"close\":_vm.editDialogClosed}},[_c('el-form',{ref:\"editUserFormRef\",staticClass:\"demo-ruleForm\",attrs:{\"model\":_vm.editUserForm,\"rules\":_vm.editUserFormRules,\"label-width\":\"70px\"}},[_c('el-form-item',{attrs:{\"label\":\"用户名\"}},[_c('el-input',{attrs:{\"disabled\":\"\"},model:{value:(_vm.editUserForm.username),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"username\", $$v)},expression:\"editUserForm.username\"}})],1),_c('el-form-item',{attrs:{\"label\":\"邮箱\",\"prop\":\"email\"}},[_c('el-input',{model:{value:(_vm.editUserForm.email),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"email\", $$v)},expression:\"editUserForm.email\"}})],1),_c('el-form-item',{attrs:{\"label\":\"手机\",\"prop\":\"mobile\"}},[_c('el-input',{model:{value:(_vm.editUserForm.mobile),callback:function ($$v) {_vm.$set(_vm.editUserForm, \"mobile\", $$v)},expression:\"editUserForm.mobile\"}})],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.editDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.editUser}},[_vm._v(\"确 定\")])],1)],1),_c('el-dialog',{attrs:{\"title\":\"分配角色\",\"visible\":_vm.setRoleDialogVisible,\"width\":\"50%\"},on:{\"update:visible\":function($event){_vm.setRoleDialogVisible=$event},\"close\":_vm.setRoleDialogClosed}},[_c('div',[_c('p',[_vm._v(\"当前的用户:\"+_vm._s(_vm.userInfo.username))]),_c('p',[_vm._v(\"当前的角色:\"+_vm._s(_vm.userInfo.roleid))]),_c('p',[_vm._v(\"分配新角色: \"),_c('el-select',{attrs:{\"placeholder\":\"请选择新角色\"},model:{value:(_vm.selectRoleId),callback:function ($$v) {_vm.selectRoleId=$$v},expression:\"selectRoleId\"}},_vm._l((_vm.rolesList),function(item){return _c('el-option',{key:item.id,attrs:{\"label\":item,\"value\":item}})}),1)],1)]),_c('div',{attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.setRoleDialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.saveRoleInfo}},[_vm._v(\"确 定\")])],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <el-card>\r\n      <el-row :gutter=\"20\">\r\n        <el-col :span=\"7\">\r\n          <el-input\r\n            placeholder=\"请输入内容\"\r\n            clearable\r\n            @clear=\"getUserList\"\r\n            v-model=\"queryInfo.query\"\r\n          >\r\n            <el-button\r\n              slot=\"append\"\r\n              icon=\"el-icon-search\"\r\n              @click=\"getUserList\"\r\n            ></el-button>\r\n          </el-input>\r\n        </el-col>\r\n        <el-col :span=\"4\">\r\n          <el-button type=\"primary\" @click=\"dialogVisible = true\"\r\n            >添加用户</el-button\r\n          >\r\n        </el-col>\r\n      </el-row>\r\n      <el-table :data=\"userlist\" border stripe style=\"width: 100%\">\r\n        <el-table-column type=\"index\"></el-table-column>\r\n        <el-table-column prop=\"username\" label=\"姓名\"></el-table-column>\r\n        <el-table-column prop=\"email\" label=\"邮箱\"></el-table-column>\r\n        <el-table-column prop=\"mobilephone\" label=\"电话\"></el-table-column>\r\n        <el-table-column prop=\"roleid\" label=\"角色\"></el-table-column>\r\n        <el-table-column label=\"状态\">\r\n          <template v-slot=\"scope\">\r\n            <el-switch\r\n              v-model=\"scope.row.mg_state\"\r\n              @change=\"userStateChanged(scope.row)\"\r\n            ></el-switch>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <!-- 编辑用户 -->\r\n          <template v-slot=\"scope\">\r\n            <el-button\r\n              type=\"primary\"\r\n              icon=\"el-icon-edit\"\r\n              @click=\"showEditDialog(scope.row.id)\"\r\n              size=\"mini\"\r\n            ></el-button>\r\n            <!-- 删除用户 -->\r\n            <el-button\r\n              type=\"danger\"\r\n              @click=\"deleteUser(scope.row.id)\"\r\n              icon=\"el-icon-delete\"\r\n              size=\"mini\"\r\n            ></el-button>\r\n            <!-- 分配角色 -->\r\n            <el-tooltip\r\n              :enterable=\"false\"\r\n              effect=\"dark\"\r\n              content=\"分配角色\"\r\n              placement=\"top-start\"\r\n            >\r\n              <el-button\r\n                type=\"warning\"\r\n                icon=\"el-icon-setting\"\r\n                size=\"mini\"\r\n                @click=\"setRole(scope.row)\"\r\n              ></el-button>\r\n            </el-tooltip>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"queryInfo.pagenum\"\r\n        :page-sizes=\"[1, 2, 5, 10]\"\r\n        :page-size=\"queryInfo.pagesize\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"total\"\r\n      ></el-pagination>\r\n    </el-card>\r\n\r\n    <!-- 添加用户对话框 -->\r\n    <el-dialog\r\n      title=\"添加用户\"\r\n      :visible.sync=\"dialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"addDialogClosed\"\r\n    >\r\n      <el-form\r\n        :model=\"addUserForm\"\r\n        :rules=\"addUserFormRules\"\r\n        ref=\"addUserFormRef\"\r\n        label-width=\"70px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item label=\"用户名\" prop=\"username\">\r\n          <el-input v-model=\"addUserForm.username\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"密码\" prop=\"password\">\r\n          <el-input v-model=\"addUserForm.password\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"addUserForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"addUserForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"addUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 修改用户对话框 -->\r\n    <el-dialog\r\n      title=\"修改用户\"\r\n      :visible.sync=\"editDialogVisible\"\r\n      width=\"50%\"\r\n      @close=\"editDialogClosed\"\r\n    >\r\n      <el-form\r\n        :model=\"editUserForm\"\r\n        :rules=\"editUserFormRules\"\r\n        ref=\"editUserFormRef\"\r\n        label-width=\"70px\"\r\n        class=\"demo-ruleForm\"\r\n      >\r\n        <el-form-item label=\"用户名\">\r\n          <el-input v-model=\"editUserForm.username\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\" prop=\"email\">\r\n          <el-input v-model=\"editUserForm.email\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"手机\" prop=\"mobile\">\r\n          <el-input v-model=\"editUserForm.mobile\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"editDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"editUser\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n\r\n    <!-- 分配角色对话框 -->\r\n    <el-dialog\r\n      title=\"分配角色\"\r\n      :visible.sync=\"setRoleDialogVisible\"\r\n      @close=\"setRoleDialogClosed\"\r\n      width=\"50%\"\r\n    >\r\n      <div>\r\n        <p>当前的用户:{{ userInfo.username }}</p>\r\n        <p>当前的角色:{{ userInfo.roleid }}</p>\r\n        <p>分配新角色:\r\n          <el-select v-model=\"selectRoleId\" placeholder=\"请选择新角色\">\r\n            <el-option\r\n              v-for=\"item in rolesList\"\r\n              :key=\"item.id\"\r\n              :label=\"item\"\r\n              :value=\"item\">\r\n            </el-option>\r\n          </el-select>\r\n        </p>\r\n      </div>\r\n      <div slot=\"footer\">\r\n        <el-button @click=\"setRoleDialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveRoleInfo\"\r\n          >确 定</el-button\r\n        >\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapActions} from 'vuex'\r\nexport default {\r\n  data() {\r\n    // 自定义邮箱校验规则\r\n    var checkEmail = (rule, value, cb) => {\r\n      const regEail = /^[A-Za-z\\d]+([-_.][A-Za-z\\d]+)*@([A-Za-z\\d]+[-.])+[A-Za-z\\d]{2,4}$/;\r\n      if (regEail.test(value)) {\r\n        return cb();\r\n      }\r\n      cb(new Error(\"请输入合法的邮箱\"));\r\n    };\r\n    // 自定义手机号校验规则\r\n    var checkMobile = (rule, value, cb) => {\r\n      const regMobile = /^[1][3,4,5,7,8][0-9]{9}$/;\r\n      if (regMobile.test(value)) {\r\n        return cb();\r\n      }\r\n      cb(new Error(\"请输入合法的手机号\"));\r\n    };\r\n    return {\r\n      queryInfo: {\r\n        query: \"\",\r\n        pagenum: 1,\r\n        pagesize: 5\r\n      },\r\n      userlist: [{username:1,email:2,mobile:1,role_name:'管理员'}],\r\n      total: 10,\r\n      dialogVisible: false,\r\n      editDialogVisible: false,\r\n      addUserForm: {\r\n        username: \"\",\r\n        password: \"\",\r\n        email: \"\",\r\n        mobile: \"\"\r\n      },\r\n      setRoleDialogVisible: false,\r\n      addUserFormRules: {\r\n        username: [\r\n          { required: true, message: \"请输入用户名\", trigger: \"blur\" },\r\n          {\r\n            require: true,\r\n            min: 3,\r\n            max: 10,\r\n            message: \"用户名长度在 3 到 10 个字符\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        password: [\r\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          {\r\n            require: true,\r\n            min: 6,\r\n            max: 15,\r\n            message: \"密码长度在 6 到 15 个字符\",\r\n            trigger: \"blur\"\r\n          }\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          { validator: checkEmail, trigger: \"blur\" }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机\", trigger: \"blur\" },\r\n          { validator: checkMobile, trigger: \"blur\" }\r\n        ]\r\n      },\r\n      editUserForm: {},\r\n      editUserFormRules: {\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"blur\" },\r\n          { validator: checkEmail, trigger: \"blur\" }\r\n        ],\r\n        mobile: [\r\n          { required: true, message: \"请输入手机\", trigger: \"blur\" },\r\n          { validator: checkMobile, trigger: \"blur\" }\r\n        ]\r\n      },\r\n      userInfo: \"\",\r\n      rolesList: [1,2,3],\r\n      selectRoleId:'',\r\n      roleid:''\r\n    };\r\n  },\r\n  methods: {\r\n    ...mapActions(['setAdmin','setAdmin2']),\r\n     getUserList() {\r\n      this.$axios.get('http://8.141.56.170:9100/admin/userlist/'+this.roleid+'/'+1,{params:{\r\n        limit:this.queryInfo.pagesize,\r\n        page:this.queryInfo.pagenum,\r\n       \r\n     } }).then(res=>{\r\n        console.log(res)\r\n       let userl = res.data.data\r\n        for(var i = 0;i<userl.length;i++){\r\n          userl[i].mg_state = !userl[i].mg_state\r\n        }\r\n        if(userl.length!=0){\r\n       this.userlist = userl\r\n       this.total = this.userlist.length}\r\n\r\n       else{\r\n          this.$axios.get('http://8.141.56.170:9100/admin/userlist/'+1+'/'+1,{params:{\r\n        limit:this.queryInfo.pagesize,\r\n        page:this.queryInfo.pagenum,\r\n       \r\n     } }).then(res1=>{\r\n       let userl = res1.data.data\r\n        for(var i = 0;i<userl.length;i++){\r\n          userl[i].mg_state = !userl[i].mg_state\r\n        }\r\n       this.userlist = userl\r\n     })\r\n       }\r\n\r\n        \r\n      })\r\n    },\r\n    handleSizeChange(newSize) {\r\n      this.queryInfo.pagesize = newSize;\r\n      this.getUserList();\r\n    },\r\n    handleCurrentChange(newPage) {\r\n      this.queryInfo.pagenum = newPage;\r\n      this.getUserList();\r\n    },\r\n   userStateChanged(userinfo) {\r\n     var key\r\n     if(userinfo.mg_state == true){\r\n       key = 1\r\n     }\r\n     else{\r\n        key = 0\r\n     }\r\n      this.$axios.put('http://8.141.56.170:9100/admin/user/forbid/'+userinfo.userid+'/'+key).then(res=>{console.log(res)})\r\n    \r\n    \r\n    },\r\n    addDialogClosed() {\r\n      this.$refs.addUserFormRef.resetFields();\r\n    },\r\n    \r\n    showEditDialog() {\r\n   \r\n      this.editDialogVisible = true;\r\n      \r\n    },\r\n    editDialogClosed() {\r\n      this.$refs.editUserFormRef.resetFields();\r\n    },\r\n   \r\n  \r\n    async setRole(userInfo) {\r\n       this.$axios({\r\n         method:'post',\r\n         url:'http://8.141.56.170:9100/admin/finduserbyname',\r\n        \r\n         data:{\r\n           username:userInfo.username\r\n         }\r\n\r\n\r\n\r\n       }).then(res=>{\r\n         console.log(res)\r\n         this. userInfo = res.data.data[0]\r\n         \r\n       })\r\n      \r\n      this.setRoleDialogVisible = true;\r\n    },\r\n    async saveRoleInfo() {\r\n      if(!this.selectRoleId) {\r\n        return this.$message.error('请选择要分配的角色！')\r\n      }\r\n      this.$axios.put('http://8.141.56.170:9100/admin/set/administrator/'+this.userInfo.userid+'/'+this.selectRoleId).then(res=>{\r\n        console.log(res)\r\n        if(res.data.status==200){\r\n         this.$message.success('分配角色成功！')\r\n      this.getUserList();\r\n      this.setRoleDialogVisible = false}\r\n      else{\r\n        this.$alert(res.data.message)\r\n      }\r\n      })\r\n      \r\n    },\r\n    setRoleDialogClosed() {\r\n      this.selectRoleId = '',\r\n      this.userInfo = {}\r\n    }\r\n  },\r\n  created() {\r\n  \r\n     if(this.$store.state.user.isadmin){\r\n      this.roleid = 2\r\n    }\r\n    if(this.$store.state.user.isadmin2){\r\n      this.roleid = 1\r\n    }\r\n      this.getUserList();\r\n  }\r\n};\r\n</script>\r\n<style >\r\n\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./usersList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./usersList.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./usersList.vue?vue&type=template&id=fd9b2b56&\"\nimport script from \"./usersList.vue?vue&type=script&lang=js&\"\nexport * from \"./usersList.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}